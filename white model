import numpy as np
import matplotlib.pyplot as plt


#NO,  here it has fixed values, i want it to get variable inputs for total energy consumption and calculate the floor area. 
def oasis_white_model(duration_hrs=24, u_value=0.5, area=1000, temp_out=30, temp_set=22):
    # 1. Time Setup (24 hours)
    t = np.linspace(0, duration_hrs, 100)
    
    # 2. Parabolic Occupancy Curve
    # Center of gravity at 14:00 (mid-day peak), zero at 06:00 and 22:00
# OCCUPANCY FACTOR SHOULD BE DAMPENED BY AI DEPENDING UPOPN THE BUILDING , AS SOME BUILDING DOES NOT CAREE OF OCCUPANY AT CERTAINF TIMES 
# NO ITS SHOULD DO WEIBULL DISTRIBUTION CURVE WITH C AND K VAULES
    peak_time = 14
    occupancy = - (t - peak_time)**2 + 16 # Parabolic shape
    occupancy = np.clip(occupancy / np.max(occupancy), 0, 1) # Normalize 0 to 1
    
    # 3. Parameter Calculations
    #NO THE LIGHTING WILL BE THE FLOOR AREA * THE AVERAGE ILLUMINATION PER M2 * CONTROL FACTOR * OCCUPANCY FACTOR 
    # Lighting: Correlated to occupancy + 15% residual
    lighting = (occupancy * 0.85) + 0.15
    
    # Ventilation: Center around occupancy (1 to 10 L/s per person)
    # Plus a thermal component based on delta T and variable COP
    del_t = abs(temp_out - temp_set)
    cop_vent = 3.0 # Average COP placeholder
    vent_base = (occupancy * 9 + 1) # 1 to 10 scale
    ventilation = (vent_base * 0.95) + 0.05 + (del_t / cop_vent * 0.01)
    
    # HVAC: U * Area * delT
    hvac_load = (u_value * area * del_t) / 1000 # kW
    hvac = (occupancy * 0.95 * hvac_load) + (0.05 * hvac_load)
    
    # Plug Loads / Others: 5% residual
    others = (occupancy * 0.95) + 0.05
    return t, lighting, ventilation, hvac, others

# Run Model
t, light, vent, hvac, misc = oasis_white_model()

# Visualization
plt.figure(figsize=(12, 6))
plt.plot(t, light, label='Lighting (15% Residual)', color='gold', lw=2)
plt.plot(t, vent, label='Ventilation (5% Residual)', color='skyblue', lw=2)
plt.plot(t, hvac / np.max(hvac), label='HVAC Load (Scaled)', color='salmon', lw=2)
plt.plot(t, misc, label='Other Loads (5% Residual)', color='gray', linestyle='--')

plt.title("Oasis Project: 24h White Model Energy Curves")
plt.xlabel("Time of Day (Hours)")
plt.ylabel("Normalized Load Intensity")
plt.xticks(np.arange(0, 25, 2))
plt.grid(alpha=0.3)
plt.legend()
plt.show()
